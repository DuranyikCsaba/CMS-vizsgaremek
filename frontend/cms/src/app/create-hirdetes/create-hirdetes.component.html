<form id="hirdetesForm" [formGroup]="hirdetesForm" (ngSubmit)="onSubmit()">
  <div id="hirdetesPanel">
    <div id="hirdetesTitle">
      <h2>Hirdetés Feladása</h2>
    </div>

    <!-- Márka mező -->
    <div class="form-group">
      <label for="marka">Márka</label>
      <input type="text" id="marka" class="hirdetesInputs" formControlName="marka" required>
      <div *ngIf="hirdetesForm.get('marka')?.invalid && hirdetesForm.get('marka')?.touched" class="error-message">
        A márka megadása kötelező!
      </div>
    </div>

      <!-- Modell mező -->
      <div class="form-group">
        <label for="modell">Modell</label>
        <input type="text" id="modell" class="hirdetesInputs" formControlName="modell" required>
        <div *ngIf="hirdetesForm.get('modell')?.invalid && hirdetesForm.get('modell')?.touched" class="error-message">
          A modell megadása kötelező!
        </div>
      </div>

       <!-- Hengerűrtartalom mező -->
    <div class="form-group">
      <label for="hengerurtartalom">Hengerűrtartalom</label>
      <input type="number" step="0.1" id="hengerurtartalom" class="hirdetesInputs" formControlName="hengerurtartalom" required min="0">
      <div *ngIf="hirdetesForm.get('hengerurtartalom')?.invalid && hirdetesForm.get('hengerurtartalom')?.touched" class="error-message">
        A hengerűrtartalom nem lehet negatív!
      </div>
    </div>

      <!-- Ajtók száma mező -->
      <div class="form-group">
        <label for="ajtok_szama">Ajtók száma</label>
        <input type="number" id="ajtok_szama" class="hirdetesInputs" formControlName="ajtok_szama" required min="1">
        <div *ngIf="hirdetesForm.get('ajtok_szama')?.invalid && hirdetesForm.get('ajtok_szama')?.touched" class="error-message">
          Az ajtók száma nem lehet kisebb, mint 1!
        </div>
      </div>

   

    <!-- Üzemanyag mező -->
    <div class="form-group">
      <label for="uzemanyag">Üzemanyag</label>
      <select id="uzemanyag" class="hirdetesInputs" formControlName="uzemanyag" required>
        <option value="">Válasszon üzemanyagot</option>
        <option value="Benzin">Benzin</option>
        <option value="Dízel">Dízel</option>
        <option value="Elektromos">Elektromos</option>
        <option value="Hibrid">Hibrid</option>
      </select>
      <div *ngIf="hirdetesForm.get('uzemanyag')?.invalid && hirdetesForm.get('uzemanyag')?.touched" class="error-message">
        Az üzemanyag kiválasztása kötelező!
      </div>
    </div>

    <!-- Évjárat mező -->
    <div class="form-group">
      <label for="evjarat">Évjárat</label>
      <input type="number" id="evjarat" class="hirdetesInputs" formControlName="evjarat" required min="1900" [max]="currentYear">
      <div *ngIf="hirdetesForm.get('evjarat')?.invalid && hirdetesForm.get('evjarat')?.touched" class="error-message">
        Az évjáratnak 1900 és {{ currentYear }} között kell lennie!
      </div>
    </div>

    <!-- Futott kilométer mező -->
    <div class="form-group">
      <label for="futott_kilometer">Futott kilométer</label>
      <input type="number" id="futott_kilometer" class="hirdetesInputs" formControlName="futott_kilometer" required min="0">
      <div *ngIf="hirdetesForm.get('futott_kilometer')?.invalid && hirdetesForm.get('futott_kilometer')?.touched" class="error-message">
        A futott kilométer nem lehet negatív!
      </div>
    </div>

    <!-- Szín mező -->
    <div class="form-group">
      <label for="szin">Szín</label>
      <input type="text" id="szin" class="hirdetesInputs" formControlName="szin" required>
      <div *ngIf="hirdetesForm.get('szin')?.invalid && hirdetesForm.get('szin')?.touched" class="error-message">
        A szín megadása kötelező!
      </div>
    </div>

    <!-- Sebességváltó típusa mező -->
    <div class="form-group">
      <label for="sebessegvalto_tipus">Sebességváltó típusa</label>
      <select id="sebessegvalto_tipus" class="hirdetesInputs" formControlName="sebessegvalto_tipus" required>
        <option value="">Válasszon sebességváltó típust</option>
        <option value="Manuális">Manuális</option>
        <option value="Automata">Automata</option>
      </select>
      <div *ngIf="hirdetesForm.get('sebessegvalto_tipus')?.invalid && hirdetesForm.get('sebessegvalto_tipus')?.touched" class="error-message">
        A sebességváltó típusának kiválasztása kötelező!
      </div>
    </div>

     <!-- Adatok mező -->
     <div class="form-group">
      <label for="adatok">Leírás</label>
      <textarea type="text" id="adatok" formControlName="adatok" required></textarea>
      <div *ngIf="hirdetesForm.get('adatok')?.invalid && hirdetesForm.get('adatok')?.touched" class="error-message">
        Leírás megadása kötelező
      </div>
    </div>

    <!-- Kiegészítők mező -->
    <div class="form-group">
      <label for="kiegeszitok">Kiegészítők</label>
      <input type="text" id="kiegeszitok" class="hirdetesInputs" formControlName="kiegeszitok">
    </div>

    <!-- Műszaki vizsga érvényessége mező -->
    <div class="form-group">
      <label for="muszaki_vizsga_ervenyes">Műszaki vizsga érvényessége</label>
      <input type="date" id="muszaki_vizsga_ervenyes" class="hirdetesInputs" formControlName="muszaki_vizsga_ervenyes">
    </div>

    <!-- Baleseti előzmények mező -->
    <div class="form-group">
      <label for="baleseti_elozmenyek">Baleseti előzmények</label>
      <textarea id="baleseti_elozmenyek" class="hirdetesInputs" formControlName="baleseti_elozmenyek"></textarea>
    </div>

    <div class="form-group">
      <label for="ar">Ár</label>
      <input type="number" step="0.1" id="ar" class="hirdetesInputs" formControlName="ar" required min="0">
      <div *ngIf="hirdetesForm.get('ar')?.invalid && hirdetesForm.get('ar')?.touched" class="error-message">
        Az ár nem lehet negatív!
      </div>
    </div>

    <div class="form-group">
    <label for="ert_telszam">Telefonszám</label>
    <input type="tel" id="ert_telszam" class="hirdetesInputs" formControlName="ert_telszam" required pattern="^\+36[0-9]{9}$" placeholder="+36xxxxxxxxx">
    <div *ngIf="hirdetesForm.get('ert_telszam')?.invalid && hirdetesForm.get('ert_telszam')?.touched" class="error-message">
        Kérjük, adjon meg egy érvényes telefonszámot a következő formátumban: +36xxxxxxxxx!
    </div>
    </div>

    <!-- Képek feltöltése -->
    <div class="form-group">
      <label for="kepek">Képek</label>
      <input type="file" id="kepek" (change)="onFileSelected($event)" accept="image/*" multiple>
      <div *ngIf="selectedFiles.length === 0 && hirdetesForm.get('kepek')?.touched" class="error-message">
        Legalább egy kép kiválasztása kötelező!
      </div>
      <div *ngIf="imageUrls.length > 0">
        <h3>Kiválasztott képek:</h3>
        <div *ngFor="let imageUrl of imageUrls">
          <img [src]="imageUrl" alt="Selected Image" style="max-width: 100 px; max-height: 100px; margin: 5px;">
        </div>
      </div>
    </div>

    <p class="hirdetesSzoveg"><strong>Egy hirdetés időtartama 2 hét!</strong></p>

    <!-- Hirdetés feladása gomb -->
    <button id="hirdetesSubmit" *ngIf="isLoggedIn$ | async" type="submit" class="btn" [disabled]="!hirdetesForm.valid || selectedFiles.length === 0">
      Hirdetés Feladása
    </button>

    <!-- Bejelentkezési üzenet -->
    <p class="hirdetesToLogin" *ngIf="!(isLoggedIn$ | async)">Kérjük, jelentkezzen be a hirdetés feladásához.</p>
  </div>
</form>